:root {
	line-height: 1.4;
	font-weight: 400;

	color-scheme: light dark;

	/* Light/Dark theme colors using light-dark() */
	--bg-primary: light-dark(#ffffff, #1a1a1a);
	--bg-secondary: light-dark(#f8f9fa, #2d2d2d);
	--bg-tertiary: light-dark(#e9ecef, #3a3a3a);
	--text-primary: light-dark(#212529, #e9ecef);
	--text-secondary: light-dark(#6c757d, #adb5bd);
	--text-muted: light-dark(#868e96, #6c757d);
	--border-color: light-dark(#dee2e6, #495057);
	--border-light: light-dark(#f1f3f4, #343a40);
	--accent-primary: light-dark(#0d6efd, #4dabf7);
	--accent-secondary: light-dark(#6f42c1, #9775fa);
	--success: light-dark(#198754, #51cf66);
	--warning: light-dark(#fd7e14, #ffd43b);
	--danger: light-dark(#dc3545, #ff6b6b);

	/* Shadows */
	--shadow-sm: light-dark(0 1px 2px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.3));
	--shadow-md: light-dark(0 4px 6px rgba(0, 0, 0, 0.07), 0 4px 6px rgba(0, 0, 0, 0.4));
	--shadow-lg: light-dark(0 10px 15px rgba(0, 0, 0, 0.1), 0 10px 15px rgba(0, 0, 0, 0.5));

	font-synthesis: none;
	text-rendering: optimizeLegibility;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

* {
	box-sizing: border-box;
}

body {
	margin: 0;
	background-color: var(--bg-primary);
	color: var(--text-primary);
	min-height: 100vh;
}

#app {
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

/* Header */
.header {
	background-color: var(--bg-secondary);
	border-bottom: 1px solid var(--border-color);
	padding: 1rem 1.5rem;
	position: sticky;
	top: 0;
	z-index: 100;
}

.header h1 {
	margin: 0;
	font-size: 1.5rem;
	font-weight: 600;
	color: var(--text-primary);
}

/* Main Control Board */
.control-board {
	flex: 1;
	padding: 1rem;
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
	gap: 1rem;
	align-items: start;
}

/* Root Cards */
.root-card {
	background-color: var(--bg-secondary);
	border: 1px solid var(--border-color);
	border-radius: 12px;
	box-shadow: var(--shadow-md);
	container-type: inline-size;
	overflow: hidden;
}

.root-card[data-expanded='true'] {
	grid-column: 1 / -1;
	max-width: none;
}

.root-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 1rem 1.5rem;
	background-color: var(--bg-tertiary);
	border-bottom: 1px solid var(--border-color);
}

.root-header h2 {
	margin: 0;
	font-size: 1.25rem;
	font-weight: 600;
	color: var(--accent-primary);
}

.expand-btn {
	background: none;
	border: 1px solid var(--border-color);
	border-radius: 6px;
	padding: 0.25rem 0.5rem;
	cursor: pointer;
	color: var(--text-secondary);
	font-size: 1rem;
}

.expand-btn:hover {
	background-color: var(--bg-primary);
	color: var(--text-primary);
}

.root-controls {
	padding: 1.5rem;
	display: flex;
	flex-direction: column;
	gap: 1.5rem;
}

/* Container Queries for Root Cards */
@container (max-width: 400px) {
	.root-controls {
		padding: 1rem;
		gap: 1rem;
	}

	.types-section {
		display: none;
	}

	.toggle-label {
		display: none;
	}
}

@container (max-width: 300px) {
	.slider-labels {
		display: none;
	}

	.animation-params {
		display: none;
	}
}

/* Slider Section */
.slider-section {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
}

.slider-section label {
	display: flex;
	align-items: center;
	justify-content: space-between;
	font-size: 0.875rem;
	font-weight: 500;
	color: var(--text-secondary);
}

.slider-value {
	color: var(--accent-primary);
	font-weight: 600;
}

.timeline-slider {
	width: 100%;
	height: 6px;
	border-radius: 3px;
	background: var(--border-light);
	outline: none;
	-webkit-appearance: none;
}

.timeline-slider::-webkit-slider-thumb {
	-webkit-appearance: none;
	appearance: none;
	width: 18px;
	height: 18px;
	border-radius: 50%;
	background: var(--accent-primary);
	cursor: pointer;
	box-shadow: var(--shadow-sm);
}

.timeline-slider::-moz-range-thumb {
	width: 18px;
	height: 18px;
	border-radius: 50%;
	background: var(--accent-primary);
	cursor: pointer;
	border: none;
	box-shadow: var(--shadow-sm);
}

.timeline-slider:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.slider-labels {
	display: flex;
	justify-content: space-between;
	font-size: 0.75rem;
	color: var(--text-muted);
	margin-top: 0.25rem;
}

.slider-section.compact {
	margin-top: 0.5rem;
}

.slider-section.compact label {
	font-size: 0.75rem;
}

/* Toggle Section */
.toggle-section {
	display: flex;
	flex-wrap: wrap;
	gap: 1rem;
}

.toggle {
	display: flex;
	align-items: center;
	gap: 0.5rem;
	cursor: pointer;
	font-size: 0.875rem;
}

.toggle input[type='checkbox'] {
	display: none;
}

.toggle-slider {
	position: relative;
	width: 36px;
	height: 20px;
	background-color: var(--border-color);
	border-radius: 10px;
	transition: background-color 0.2s;
}

.toggle-slider::before {
	content: '';
	position: absolute;
	top: 2px;
	left: 2px;
	width: 16px;
	height: 16px;
	background-color: var(--bg-primary);
	border-radius: 50%;
	transition: transform 0.2s;
}

.toggle input[type='checkbox']:checked + .toggle-slider {
	background-color: var(--accent-primary);
}

.toggle input[type='checkbox']:checked + .toggle-slider::before {
	transform: translateX(16px);
}

.toggle-label {
	color: var(--text-secondary);
	font-weight: 500;
}

/* Types Section */
.types-section h3 {
	margin: 0 0 0.75rem 0;
	font-size: 1rem;
	font-weight: 600;
	color: var(--text-primary);
}

.types-list {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	margin-bottom: 1rem;
}

.type-item {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	padding: 0.5rem 0.75rem;
	background-color: var(--bg-primary);
	border: 1px solid var(--border-light);
	border-radius: 6px;
}

.type-item span {
	flex: 1;
	font-size: 0.875rem;
	color: var(--text-primary);
}

.add-type {
	display: flex;
	gap: 0.5rem;
}

.type-input {
	flex: 1;
	padding: 0.5rem 0.75rem;
	border: 1px solid var(--border-color);
	border-radius: 6px;
	background-color: var(--bg-primary);
	color: var(--text-primary);
	font-size: 0.875rem;
}

.type-input::placeholder {
	color: var(--text-muted);
}

/* Buttons */
.btn-small {
	padding: 0.25rem 0.5rem;
	border: 1px solid var(--border-color);
	border-radius: 4px;
	background-color: var(--bg-primary);
	color: var(--text-secondary);
	font-size: 0.75rem;
	cursor: pointer;
	font-weight: 500;
}

.btn-small:hover {
	background-color: var(--bg-tertiary);
	color: var(--text-primary);
}

.btn-add {
	background-color: var(--success);
	color: white;
	border-color: var(--success);
}

.btn-add:hover {
	opacity: 0.9;
}

.btn-disable {
	background-color: var(--warning);
	color: white;
	border-color: var(--warning);
}

.btn-disable:hover {
	opacity: 0.9;
}

.btn-delete {
	background-color: var(--danger);
	color: white;
	border-color: var(--danger);
	font-weight: 600;
}

.btn-delete:hover {
	opacity: 0.9;
}

/* Groups Container */
.groups-container {
	border-top: 1px solid var(--border-color);
	padding: 1.5rem;
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

/* Group Cards */
.group-card {
	background-color: var(--bg-primary);
	border: 1px solid var(--border-light);
	border-radius: 8px;
	overflow: hidden;
	container-type: inline-size;
}

.group-card.nested {
	margin-left: 1rem;
	border-left: 3px solid var(--accent-secondary);
}

.group-card.disabled {
	opacity: 0.5;
}

.group-card.disabled * {
	color: var(--text-muted) !important;
}

.group-card.disabled .toggle-slider {
	background-color: var(--border-color) !important;
}

.group-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0.75rem 1rem;
	background-color: var(--bg-tertiary);
	border-bottom: 1px solid var(--border-light);
}

.group-header h3 {
	margin: 0;
	font-size: 1rem;
	font-weight: 600;
	color: var(--text-primary);
}

.depth-indicator {
	font-size: 0.75rem;
	color: var(--text-muted);
	background-color: var(--bg-primary);
	padding: 0.25rem 0.5rem;
	border-radius: 4px;
}

.group-controls {
	padding: 1rem;
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

/* Container Queries for Group Cards */
@container (max-width: 300px) {
	.group-controls {
		padding: 0.75rem;
		gap: 0.75rem;
	}

	.classes-section {
		display: none;
	}

	.depth-indicator {
		display: none;
	}
}

/* Classes Section */
.classes-section {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	flex-wrap: wrap;
}

.classes-label {
	font-size: 0.875rem;
	color: var(--text-secondary);
	font-weight: 500;
}

.classes-list {
	display: flex;
	gap: 0.5rem;
	flex-wrap: wrap;
}

.class-tag {
	padding: 0.25rem 0.5rem;
	background-color: var(--accent-secondary);
	color: white;
	border-radius: 4px;
	font-size: 0.75rem;
	font-weight: 500;
}

/* Pair Container */
.pair-container {
	border-top: 1px solid var(--border-light);
	padding: 1rem;
	background-color: var(--bg-secondary);
}

.pair-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 1rem;
}

.pair-header h4 {
	margin: 0;
	font-size: 0.875rem;
	font-weight: 600;
	color: var(--text-primary);
}

.pair-child {
	margin-bottom: 1rem;
	padding: 0.75rem;
	background-color: var(--bg-primary);
	border: 1px solid var(--border-light);
	border-radius: 6px;
}

.pair-child:last-child {
	margin-bottom: 0;
}

.pair-child-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 0.75rem;
}

.pair-child-header h5 {
	margin: 0;
	font-size: 0.875rem;
	font-weight: 600;
	color: var(--accent-primary);
}

/* Children Container */
.children-container {
	border-top: 1px solid var(--border-light);
	padding: 1rem;
	background-color: var(--bg-secondary);
}

.children-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 1rem;
}

.children-header h4 {
	margin: 0;
	font-size: 0.875rem;
	font-weight: 600;
	color: var(--text-primary);
}

/* Animations */
.animations-list {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
}

.animation-item {
	display: flex;
	align-items: center;
	gap: 0.75rem;
	padding: 0.5rem 0.75rem;
	background-color: var(--bg-secondary);
	border: 1px solid var(--border-light);
	border-radius: 4px;
	flex-wrap: wrap;
}

.animation-name {
	font-size: 0.875rem;
	font-weight: 600;
	color: var(--text-primary);
}

.animation-params {
	font-size: 0.75rem;
	color: var(--text-muted);
	flex: 1;
}

/* Responsive Design */
@media (max-width: 768px) {
	.control-board {
		grid-template-columns: 1fr;
		padding: 0.75rem;
		gap: 0.75rem;
	}

	.header {
		padding: 0.75rem 1rem;
	}

	.header h1 {
		font-size: 1.25rem;
	}

	.root-controls {
		padding: 1rem;
	}

	.groups-container {
		padding: 1rem;
	}
}

@media (max-width: 480px) {
	.control-board {
		padding: 0.5rem;
		gap: 0.5rem;
	}

	.root-controls {
		padding: 0.75rem;
		gap: 1rem;
	}

	.groups-container {
		padding: 0.75rem;
	}

	.toggle-section {
		gap: 0.75rem;
	}

	.animation-item {
		flex-direction: column;
		align-items: flex-start;
		gap: 0.5rem;
	}

	.animation-item .toggle-section {
		align-self: flex-end;
	}
}
